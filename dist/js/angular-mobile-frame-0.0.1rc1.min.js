/*!
 * Angular Mobile Frame - v0.0.1rc1
 *
 * 2014-01-25
 *
 * Handy frame-elements for a typical mobile website with off-canvas-navigation.
 *
 * https://github.com/herschel666/angular-mobile-frame
 *
 * Copyright (c) 2014 Emanuel Kluge;
 * Licensed WTFPL
**/
!function(a,b){var c="directive",d={headerHeight:44,footerHeight:32,navWidth:240};a.module("ek.mobileFrame",["ng"]).controller("MobileFrameCtrl",["$window",function(b){var c=this;a.extend(this,d),this.toggleNav=function(){c.callback.call()},this.onNavToggle=function(a){c.callback=a},this.contentHeight=function(){return b.innerHeight-(this.headerHeight+this.footerHeight)}}])[c]("mobileFrame",["$location",function(a){function b(){var a=e?0:c;(!arguments.length||e)&&(d.css({"-webkit-transform":"translate3d("+a+"px, 0, 0)","-moz-transform":"translate3d("+a+"px, 0, 0)",transform:"translate3d("+a+"px, 0, 0)"}),e=!e)}var c,d,e=!1;return{restrict:"E",transclude:!0,scope:!0,replace:!0,controller:"MobileFrameCtrl",template:'<section class="mobile-frame" ng-transclude></section>',link:function(e,f,g,h){c=h.navWidth,d=f.css({paddingLeft:c+"px",left:-c+"px"}),h.onNavToggle(b),e.location=a,e.$watch("location.path()",b)}}}])[c]("mobileHeader",function(){return{restrict:"E",require:"^mobileFrame",transclude:!0,replace:!0,priority:200,template:['<header class="mobile-header" role="banner">','	<button type="button" class="mobile-nav-toggle" id="mobile-nav-toggle">Toggle</button>','	<div class="mobile-header-inner" ng-transclude></div>',"</header>"].join(""),link:function(c,d,e,f){e.height!==b&&(f.headerHeight=parseInt(e.height,10)),d.css("height",f.headerHeight+"px"),a.element(document.getElementById("mobile-nav-toggle")).on("click",f.toggleNav)}}})[c]("mobileNav",function(){return{restrict:"E",require:"^mobileFrame",transclude:!0,replace:!0,priority:200,template:['<div class="mobile-nav">','	<div class="mobile-nav-inner" ng-transclude></div>',"</div>"].join(""),link:function(a,c,d,e){d.width!==b&&(e.navWidth=parseInt(d.width,10)),c.css("width",e.navWidth+"px")}}})[c]("mobileContent",["$window",function(b){function c(a){var b=this;requestAnimationFrame(function(){a.css("height",b.contentHeight()+"px")})}return{restrict:"E",require:"^mobileFrame",transclude:!0,replace:!0,priority:100,scope:!0,template:['<div class="mobile-content" role="main">','	<div class="mobile-content-inner" ng-transclude></div>',"</div>"].join(""),link:function(d,e,f,g){a.element(b).on("resize",c.bind(g,e)),d.$watch("mobileFrameCtrl.headererHeight",c.bind(g,e)),d.$watch("mobileFrameCtrl.footerHeight",c.bind(g,e))}}}])[c]("mobileFooter",function(){return{restrict:"E",require:"^mobileFrame",transclude:!0,replace:!0,priority:200,template:['<footer class="mobile-footer">','	<div class="mobile-footer-inner" ng-transclude></div>',"</footer>"].join(""),link:function(a,c,d,e){d.height!==b&&(e.footerHeight=parseInt(d.height,10)),c.css("height",e.footerHeight+"px")}}})}(angular),function(a){for(var b,c,d,e=0,f=["ms","moz","webkit","o"],g=0,h=f.length;h>g&&!a.requestAnimationFrame;g+=1)a.requestAnimationFrame=a[f[g]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[f[g]+"CancelAnimationFrame"]||a[f[g]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(f){return b=(new Date).getTime(),c=Math.max(0,16-(b-e)),d=a.setTimeout(function(){f(b+c)},c),e=b+c,d}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)})}(window);